var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Ball=function(t){function e(){var e=t.call(this)||this;return e._color=16777215,e._rad=20,e.draw(),e}return __extends(e,t),e.prototype.draw=function(){this.graphics.lineStyle(2,16773120),this.graphics.beginFill(this._color),this.graphics.drawCircle(0,0,this._rad),this.graphics.endFill()},Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rad",{get:function(){return this._rad},set:function(t){this._rad=t,this.draw()},enumerable:!0,configurable:!0}),e}(egret.Sprite);__reflect(Ball.prototype,"Ball");var data=function(){function t(){}return t.getStageWidth=function(){return 0==t.stageWidth&&(t.stageWidth=egret.MainContext.instance.stage.stageWidth),t.stageWidth},t.getStageHeight=function(){return 0==t.stageHeight&&(t.stageHeight=egret.MainContext.instance.stage.stageHeight),t.stageHeight},t}();data.stageWidth=0,data.stageHeight=0,__reflect(data.prototype,"data");var DefensObject=function(t){function e(){var e=t.call(this)||this;return e._color=16777215,e._rad=20,e.draw(),e}return __extends(e,t),e.prototype.draw=function(){this.graphics.lineStyle(2,16773120),this.graphics.beginFill(this._color),this.graphics.drawRect(0,0,100,50),this.graphics.endFill()},e}(egret.Sprite);__reflect(DefensObject.prototype,"DefensObject");var Game=function(){function t(t){t.touchEnabled=!0;var e=new firstLayer;t.addChild(e)}return t}();__reflect(Game.prototype,"Game");var Main=function(t){function e(){var e=t.call(this)||this;console.log("hello world!"),e.touchEnabled=!0;new Game(e);return e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var backLayer=function(t){function e(){var e=t.call(this)||this;e._color=0,e._colors=[0,255],e._type=touchStatus.UNTOUCHING,e._canvasHeight=data.getStageHeight(),e._canvasWidth=data.getStageWidth(),e._defensList=[],e._spr=null,e.touchEnabled=!0,e.draw();var r=new egret.Timer(10,0);return r.addEventListener(egret.TimerEvent.TIMER,e.hitFunc,e),r.start(),e}return __extends(e,t),e.prototype.draw=function(){this.graphics.beginFill(this._color),this.graphics.drawRect(0,0,this._canvasWidth,this._canvasHeight),this.graphics.endFill()},e.prototype.addDefens=function(t){for(var e=0;t>e;e++){var r=new DefensObject;r.x=this._canvasWidth*Math.random(),r.y=this._canvasHeight*Math.random(),this.addChild(r),this._defensList.push(r)}},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e){this._canvasHeight=t,this._canvasWidth=e,this.draw()},Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this._canvasHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defensList",{get:function(){return this._defensList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Spr",{set:function(t){this._spr=t},enumerable:!0,configurable:!0}),e.prototype.hitFunc=function(t){if(this._spr)for(var e=0;e<this._defensList.length;e++){var r=this._defensList[e].hitTestPoint(this._spr.x,this._spr.y-this._spr.rad,!0);1==r&&(this._defensList[e].visible=!1)}},e}(egret.Sprite);__reflect(backLayer.prototype,"backLayer");var firstLayer=function(t){function e(){var e=t.call(this)||this;e._color=0,e._colors=[0,255],e._type=touchStatus.UNTOUCHING,e._Maps=[],e._ArrayNum=0,e._speed=10,e.MAX_SPEED=150,e._pressCount=0,e._longTouch=!1,e._touchNum=0,e.touchEnabled=!0;var r=new backLayer;r.color=16711680,r.setSize(2*data.getStageHeight(),data.getStageWidth()),r.alpha=.6;var i=new backLayer;i.color=65280,i.setSize(2*data.getStageHeight(),data.getStageWidth()),i.alpha=.6;var s=new backLayer;s.color=255,s.setSize(2*data.getStageHeight(),data.getStageWidth()),s.alpha=.6,e._Maps.push(r),e._Maps.push(i),e._Maps.push(s),e.addChild(e._Maps[e._ArrayNum]),e.spr=new Ball,e.spr.x=data.getStageWidth()/2,e.spr.y=data.getStageHeight()/2,e.spr.rad=40,e.addChild(e.spr);var a=new Ball;a.x=0,a.y=10,a.color=0,e.spr.addChild(a);for(var n=0;3>n;)e._Maps[n].addDefens(n+6),e._Maps[n].Spr=e.spr,n++;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onClick,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.onClick,e),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.touchMove,e);var o=new egret.Timer(50,0);return o.addEventListener(egret.TimerEvent.TIMER,e.timerFunc,e),e._speedTimer=new egret.Timer(100,0),e._speedTimer.addEventListener(egret.TimerEvent.TIMER,e.speddTimerFunc,e),e._updateClick=new egret.Timer(250,0),e._updateClick.addEventListener(egret.TimerEvent.TIMER,e.updateClickFunc,e),e._singleTimer=new egret.Timer(50,2),e._singleTimer.addEventListener(egret.TimerEvent.TIMER,e.singleClick,e),e._doubleTimer=new egret.Timer(50,2),e._doubleTimer.addEventListener(egret.TimerEvent.TIMER,e.doubleClick,e),o.start(),e}return __extends(e,t),e.prototype.touchMove=function(t){var e=t.stageX;e+this.spr.rad<=data.getStageWidth()&&e-this.spr.rad>=0&&(this.spr.x=e)},e.prototype.speddTimerFunc=function(t){this._speed<=this.MAX_SPEED&&(this._speed+=5,egret.log("speed:"+this._speed))},e.prototype.timerFunc=function(t){if(this._Maps[this._ArrayNum].y>=0){var e=this._Maps[(this._ArrayNum+1)%3];e.y=-this._Maps[this._ArrayNum].canvasHeight+this._Maps[this._ArrayNum].y,this.addChildAt(e,0)}this._Maps[this._ArrayNum].y>=data.getStageHeight()&&(this.removeChild(this._Maps[this._ArrayNum]),this._ArrayNum=(this._ArrayNum+1)%3),this._Maps[this._ArrayNum].y+=this._speed,this._Maps[(this._ArrayNum+1)%3].y+=this._speed},e.prototype.onClick=function(t){if(t.type==egret.TouchEvent.TOUCH_BEGIN)this._updateClick.start();else{if(this._pressCount=0,this._updateClick.stop(),this._longTouch)return this._touchNum=0,this._speedTimer.stop(),this._speed=10,void(this._longTouch=!1);0==this._touchNum?(this._singleTimer.start(),++this._touchNum):1==this._touchNum&&(this._doubleTimer.start(),this._touchNum=0)}},e.prototype.updateClickFunc=function(){++this._pressCount,this._pressCount>2&&(this._longTouch=!0,this._speedTimer.start())},e.prototype.singleClick=function(){1==this._touchNum&&(this.spr.rad=80,this._touchNum=0)},e.prototype.doubleClick=function(){2==this._touchNum&&(this.spr.rad=40)},e.prototype.longClick=function(){this._speedTimer.start()},e}(egret.Sprite);__reflect(firstLayer.prototype,"firstLayer");var touchStatus=function(){function t(){}return t}();touchStatus.TOUCHING="touching",touchStatus.UNTOUCHING="touching",__reflect(touchStatus.prototype,"touchStatus");